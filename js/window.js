// koffee 1.12.0

/*
000   000  000  000   000  0000000     0000000   000   000
000 0 000  000  0000  000  000   000  000   000  000 0 000
000000000  000  000 0 000  000   000  000   000  000000000
000   000  000  000  0000  000   000  000   000  000   000
00     00  000  000   000  0000000     0000000   00     00
 */
var $, AmbientLight, BackSide, BoxBufferGeometry, BoxGeometry, Camera, Color, Fog, FogExp2, GridHelper, MainWin, Mesh, MeshLambertMaterial, MeshPhysicalMaterial, MeshStandardMaterial, PCFSoftShadowMap, PMREMGenerator, PlaneGeometry, PointLight, PointLightHelper, Quaternion, Raycaster, Scene, SphereGeometry, Vector2, WebGLRenderer, deg2rad, keyinfo, klog, kpos, ref, ref1, win,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

ref = require('kxk'), $ = ref.$, deg2rad = ref.deg2rad, keyinfo = ref.keyinfo, klog = ref.klog, kpos = ref.kpos, win = ref.win;

ref1 = require('three'), Fog = ref1.Fog, FogExp2 = ref1.FogExp2, AmbientLight = ref1.AmbientLight, BackSide = ref1.BackSide, BoxBufferGeometry = ref1.BoxBufferGeometry, BoxGeometry = ref1.BoxGeometry, Camera = ref1.Camera, Color = ref1.Color, GridHelper = ref1.GridHelper, Mesh = ref1.Mesh, MeshLambertMaterial = ref1.MeshLambertMaterial, MeshPhysicalMaterial = ref1.MeshPhysicalMaterial, MeshStandardMaterial = ref1.MeshStandardMaterial, PCFSoftShadowMap = ref1.PCFSoftShadowMap, PMREMGenerator = ref1.PMREMGenerator, PlaneGeometry = ref1.PlaneGeometry, PointLight = ref1.PointLight, PointLightHelper = ref1.PointLightHelper, Quaternion = ref1.Quaternion, Raycaster = ref1.Raycaster, Scene = ref1.Scene, SphereGeometry = ref1.SphereGeometry, Vector2 = ref1.Vector2, WebGLRenderer = ref1.WebGLRenderer;

Camera = require('./camera');

MainWin = (function(superClass) {
    extend(MainWin, superClass);

    function MainWin() {
        this.onMenuAction = bind(this.onMenuAction, this);
        this.onMouseDown = bind(this.onMouseDown, this);
        this.onMouseUp = bind(this.onMouseUp, this);
        this.onMouseMove = bind(this.onMouseMove, this);
        this.onKeyUp = bind(this.onKeyUp, this);
        this.onKeyDown = bind(this.onKeyDown, this);
        this.onResize = bind(this.onResize, this);
        this.renderScene = bind(this.renderScene, this);
        this.onLoad = bind(this.onLoad, this);
        MainWin.__super__.constructor.call(this, {
            dir: __dirname,
            pkg: require('../package.json'),
            menu: '../coffee/menu.noon',
            icon: '../img/mini.png',
            prefsSeperator: 'â–¸',
            context: false,
            onLoad: this.onLoad
        });
        this.mouse = new Vector2;
        this.options = {
            dither: true,
            shadow: true,
            fog: true
        };
        addEventListener('pointerdown', this.onMouseDown);
        addEventListener('pointermove', this.onMouseMove);
        addEventListener('pointerup', this.onMouseUp);
    }

    MainWin.prototype.onLoad = function() {
        window.onresize = this.onResize;
        this.initScene($("#main"));
        return requestAnimationFrame(this.renderScene);
    };

    MainWin.prototype.initScene = function(view) {
        var box, br, geometry, material, sphere;
        this.view = view;
        this.renderer = new WebGLRenderer({
            antialias: true,
            precision: 'highp'
        });
        this.renderer.setSize(this.view.offsetWidth, this.view.offsetHeight);
        this.renderer.autoClear = false;
        this.renderer.sortObjects = true;
        this.renderer.shadowMap.type = PCFSoftShadowMap;
        this.renderer.shadowMap.enabled = true;
        this.renderer.setPixelRatio(window.devicePixelRatio);
        this.view.appendChild(this.renderer.domElement);
        this.fogColor = new Color('hsl(180, 0%, 4%)');
        this.onResize();
        br = this.renderer.domElement.getBoundingClientRect();
        this.viewOffset = new Vector2(br.left, br.top);
        this.scene = new Scene();
        this.scene.background = this.fogColor;
        this.camera = new Camera({
            view: this.view
        });
        this.sun = new PointLight(0xffffff, 2, 200);
        this.sun.position.set(0, 10, 0);
        this.sun.castShadow = true;
        this.sun.shadow.mapSize = new Vector2(2 * 2048, 2 * 2048);
        this.scene.add(this.sun);
        this.scene.add(new PointLightHelper(this.sun, 1));
        this.ambient = new AmbientLight(0x181818);
        this.scene.add(this.ambient);
        material = new MeshStandardMaterial({
            metalness: 0.6,
            roughness: 0.3,
            color: 0x5555ff
        });
        geometry = new BoxGeometry(1, 1, 1);
        box = new Mesh(geometry, material.clone());
        box.position.set(0, 1, 0);
        box.castShadow = true;
        box.receiveShadow = true;
        box.name = 'box';
        this.scene.add(box);
        material.color = new Color(0xff0000);
        material.flatShading = true;
        material.metalness = 0.9;
        geometry = new SphereGeometry(1, 10, 10);
        sphere = new Mesh(geometry, material);
        sphere.position.set(2, 1, 1);
        sphere.castShadow = true;
        sphere.receiveShadow = true;
        sphere.name = 'sphere';
        this.scene.add(sphere);
        material = new MeshStandardMaterial({
            metalness: 0.0,
            color: new Color('hsl(180,0%,4%)'),
            roughness: 1.0,
            flatShading: true
        });
        geometry = new PlaneGeometry(1000, 1000, 10);
        geometry.quaternion = new Quaternion;
        this.plane = new Mesh(geometry, material);
        this.plane.castShadow = false;
        this.plane.receiveShadow = true;
        this.plane.name = 'plane';
        this.plane.rotation.set(deg2rad(-90), 0, 0);
        this.scene.add(this.plane);
        this.scene.fog = new Fog(this.fogColor, 10, 100);
        this.setFog(this.options.fog);
        this.setDither(this.options.dither);
        return this.raycaster = new Raycaster;
    };

    MainWin.prototype.toggleDither = function() {
        return this.setDither(!this.options.dither);
    };

    MainWin.prototype.toggleFog = function() {
        return this.setFog(!this.options.fog);
    };

    MainWin.prototype.setDither = function(d) {
        this.options.dither = d;
        return this.scene.traverse(function(node) {
            if (node instanceof Mesh) {
                node.material.dithering = d;
                return node.material.needsUpdate = true;
            }
        });
    };

    MainWin.prototype.setFog = function(f) {
        this.options.fog = f;
        if (f) {
            this.scene.fog.near = 50;
            return this.scene.fog.far = 100;
        } else {
            this.scene.fog.near = 99999;
            return this.scene.fog.far = 99999 + 1;
        }
    };

    MainWin.prototype.toggleGrid = function() {
        if (this.grid) {
            this.scene.remove(this.grid);
            return delete this.grid;
        } else {
            this.grid = new GridHelper(100, 100, 0xffffff, 0x0);
            return this.scene.add(this.grid);
        }
    };

    MainWin.prototype.renderScene = function() {
        this.sun.position.copy(this.camera.getPosition());
        this.sun.position.add(this.camera.getUp().multiplyScalar(3.0));
        this.sun.position.add(this.camera.getRight().multiplyScalar(-3.0));
        this.renderer.render(this.scene, this.camera);
        return requestAnimationFrame(this.renderScene);
    };

    MainWin.prototype.onResize = function() {
        var h, ref2, w;
        w = this.view.clientWidth;
        h = this.view.clientHeight;
        this.aspect = w / h;
        this.viewSize = kpos(w, h);
        if (this.camera != null) {
            this.camera.aspect = this.aspect;
            this.camera.size = this.viewSize;
            this.camera.updateProjectionMatrix();
        }
        return (ref2 = this.renderer) != null ? ref2.setSize(w, h) : void 0;
    };

    MainWin.prototype.onKeyDown = function(event) {
        var char, combo, key, mod, ref2;
        ref2 = keyinfo.forEvent(event), mod = ref2.mod, key = ref2.key, combo = ref2.combo, char = ref2.char;
        switch (key) {
            case 'w':
                this.camera.startMoveForward();
                break;
            case 's':
                this.camera.startMoveBackward();
                break;
            case 'a':
                this.camera.startMoveLeft();
                break;
            case 'd':
                this.camera.startMoveRight();
                break;
            case 'q':
                this.camera.startMoveDown();
                break;
            case 'e':
                this.camera.startMoveUp();
                break;
            case 'left':
                this.camera.startPivotLeft();
                break;
            case 'right':
                this.camera.startPivotRight();
                break;
            case 'up':
                this.camera.startPivotUp();
                break;
            case 'down':
                this.camera.startPivotDown();
                break;
            case 'g':
                this.toggleGrid();
                break;
            case 'f':
                this.toggleFog();
                break;
            case 't':
                this.toggleDither();
                break;
            default:
                klog('keyDown', mod, key, combo, char, event.which);
        }
        return MainWin.__super__.onKeyDown.apply(this, arguments);
    };

    MainWin.prototype.onKeyUp = function(event) {
        var char, combo, key, mod, ref2;
        ref2 = keyinfo.forEvent(event), mod = ref2.mod, key = ref2.key, combo = ref2.combo, char = ref2.char;
        return MainWin.__super__.onKeyUp.apply(this, arguments);
    };

    MainWin.prototype.mouseEvent = function(event) {
        if (this.viewOffset) {
            this.mouse.x = ((event.clientX - this.viewOffset.x) / this.view.clientWidth) * 2 - 1;
            return this.mouse.y = -((event.clientY - this.viewOffset.y) / this.view.clientHeight) * 2 + 1;
        }
    };

    MainWin.prototype.onMouseMove = function(event) {
        return this.mouseEvent(event);
    };

    MainWin.prototype.onMouseUp = function(event) {
        return this.mouseEvent(event);
    };

    MainWin.prototype.onMouseDown = function(event) {
        this.mouseEvent(event);
        return this.pickObject();
    };

    MainWin.prototype.pickObject = function() {
        var i, intersect, len, ref2, ref3;
        this.raycaster.setFromCamera(this.mouse, this.camera);
        ref2 = this.raycaster.intersectObjects(this.scene.children);
        for (i = 0, len = ref2.length; i < len; i++) {
            intersect = ref2[i];
            if ((intersect != null ? (ref3 = intersect.object) != null ? ref3.type : void 0 : void 0) === 'Mesh') {
                if (intersect.object.name !== 'plane') {
                    this.camera.fadeToPos(intersect.object.position);
                    return;
                }
            }
        }
    };

    MainWin.prototype.onMenuAction = function(action, args) {
        return MainWin.__super__.onMenuAction.apply(this, arguments);
    };

    return MainWin;

})(win);

new MainWin;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6Ii4uL2NvZmZlZSIsInNvdXJjZXMiOlsid2luZG93LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSxxWEFBQTtJQUFBOzs7O0FBUUEsTUFBMkMsT0FBQSxDQUFRLEtBQVIsQ0FBM0MsRUFBRSxTQUFGLEVBQUsscUJBQUwsRUFBYyxxQkFBZCxFQUF1QixlQUF2QixFQUE2QixlQUE3QixFQUFtQzs7QUFFbkMsT0FBa1UsT0FBQSxDQUFRLE9BQVIsQ0FBbFUsRUFBRSxjQUFGLEVBQU8sc0JBQVAsRUFBZ0IsZ0NBQWhCLEVBQThCLHdCQUE5QixFQUF3QywwQ0FBeEMsRUFBMkQsOEJBQTNELEVBQXdFLG9CQUF4RSxFQUFnRixrQkFBaEYsRUFBdUYsNEJBQXZGLEVBQW1HLGdCQUFuRyxFQUF5Ryw4Q0FBekcsRUFBOEgsZ0RBQTlILEVBQW9KLGdEQUFwSixFQUEwSyx3Q0FBMUssRUFBNEwsb0NBQTVMLEVBQTRNLGtDQUE1TSxFQUEyTiw0QkFBM04sRUFBdU8sd0NBQXZPLEVBQXlQLDRCQUF6UCxFQUFxUSwwQkFBclEsRUFBZ1Isa0JBQWhSLEVBQXVSLG9DQUF2UixFQUF1UyxzQkFBdlMsRUFBZ1Q7O0FBRWhULE1BQUEsR0FBUyxPQUFBLENBQVEsVUFBUjs7QUFFSDs7O0lBRUMsaUJBQUE7Ozs7Ozs7Ozs7UUFFQyx5Q0FDSTtZQUFBLEdBQUEsRUFBUSxTQUFSO1lBQ0EsR0FBQSxFQUFRLE9BQUEsQ0FBUSxpQkFBUixDQURSO1lBRUEsSUFBQSxFQUFRLHFCQUZSO1lBR0EsSUFBQSxFQUFRLGlCQUhSO1lBSUEsY0FBQSxFQUFnQixHQUpoQjtZQUtBLE9BQUEsRUFBUyxLQUxUO1lBTUEsTUFBQSxFQUFRLElBQUMsQ0FBQSxNQU5UO1NBREo7UUFTQSxJQUFDLENBQUEsS0FBRCxHQUFTLElBQUk7UUFFYixJQUFDLENBQUEsT0FBRCxHQUNJO1lBQUEsTUFBQSxFQUFRLElBQVI7WUFDQSxN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R0F2UEk7O0FBNlB0QixJQUFJIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwXG4wMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwXG4wMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwXG4wMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMCAgICAgMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAgICAgIDAwXG4jIyNcblxueyAkLCBkZWcycmFkLCBrZXlpbmZvLCBrbG9nLCBrcG9zLCB3aW4gfSA9IHJlcXVpcmUgJ2t4aydcblxueyBGb2csIEZvZ0V4cDIsIEFtYmllbnRMaWdodCwgQmFja1NpZGUsIEJveEJ1ZmZlckdlb21ldHJ5LCBCb3hHZW9tZXRyeSwgQ2FtZXJhLCBDb2xvciwgR3JpZEhlbHBlciwgTWVzaCwgTWVzaExhbWJlcnRNYXRlcmlhbCwgTWVzaFBoeXNpY2FsTWF0ZXJpYWwsIE1lc2hTdGFuZGFyZE1hdGVyaWFsLCBQQ0ZTb2Z0U2hhZG93TWFwLCBQTVJFTUdlbmVyYXRvciwgUGxhbmVHZW9tZXRyeSwgUG9pbnRMaWdodCwgUG9pbnRMaWdodEhlbHBlciwgUXVhdGVybmlvbiwgUmF5Y2FzdGVyLCBTY2VuZSwgU3BoZXJlR2VvbWV0cnksIFZlY3RvcjIsIFdlYkdMUmVuZGVyZXIgfSA9IHJlcXVpcmUgJ3RocmVlJ1xuXG5DYW1lcmEgPSByZXF1aXJlICcuL2NhbWVyYSdcblxuY2xhc3MgTWFpbldpbiBleHRlbmRzIHdpblxuICAgIFxuICAgIEA6IC0+XG4gICAgICAgIFxuICAgICAgICBzdXBlclxuICAgICAgICAgICAgZGlyOiAgICBfX2Rpcm5hbWVcbiAgICAgICAgICAgIHBrZzogICAgcmVxdWlyZSAnLi4vcGFja2FnZS5qc29uJ1xuICAgICAgICAgICAgbWVudTogICAnLi4vY29mZmVlL21lbnUubm9vbidcbiAgICAgICAgICAgIGljb246ICAgJy4uL2ltZy9taW5pLnBuZydcbiAgICAgICAgICAgIHByZWZzU2VwZXJhdG9yOiAn4pa4J1xuICAgICAgICAgICAgY29udGV4dDogZmFsc2VcbiAgICAgICAgICAgIG9uTG9hZDogQG9uTG9hZFxuICAgICAgICAgIFxuICAgICAgICBAbW91c2UgPSBuZXcgVmVjdG9yMlxuICAgICAgICBcbiAgICAgICAgQG9wdGlvbnMgPVxuICAgICAgICAgICAgZGl0aGVyOiB0cnVlXG4gICAgICAgICAgICBzaGFkb3c6IHRydWVcbiAgICAgICAgICAgIGZvZzogICAgdHJ1ZVxuICAgICAgICAgICAgXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgJ3BvaW50ZXJkb3duJyBAb25Nb3VzZURvd25cbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciAncG9pbnRlcm1vdmUnIEBvbk1vdXNlTW92ZVxuICAgICAgICBhZGRFdmVudExpc3RlbmVyICdwb2ludGVydXAnICAgQG9uTW91c2VVcFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgb25Mb2FkOiA9PlxuXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IEBvblJlc2l6ZVxuICAgICAgICBcbiAgICAgICAgQGluaXRTY2VuZSAkIFwiI21haW5cIlxuICAgICAgICBcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEByZW5kZXJTY2VuZVxuICAgICAgICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAgICBcbiAgICAjICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgMDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgXG4gICAgXG4gICAgaW5pdFNjZW5lOiAoQHZpZXcpIC0+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIEByZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyIGFudGlhbGlhczp0cnVlIHByZWNpc2lvbjonaGlnaHAnXG4gICAgICAgICAgICBcbiAgICAgICAgQHJlbmRlcmVyLnNldFNpemUgQHZpZXcub2Zmc2V0V2lkdGgsIEB2aWV3Lm9mZnNldEhlaWdodFxuICAgICAgICBAcmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2VcbiAgICAgICAgQHJlbmRlcmVyLnNvcnRPYmplY3RzID0gdHJ1ZVxuICAgICAgICBAcmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBQQ0ZTb2Z0U2hhZG93TWFwXG4gICAgICAgIEByZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWVcbiAgICAgICAgQHJlbmRlcmVyLnNldFBpeGVsUmF0aW8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gXG4gICAgICAgIEB2aWV3LmFwcGVuZENoaWxkIEByZW5kZXJlci5kb21FbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBAZm9nQ29sb3IgPSBuZXcgQ29sb3IgJ2hzbCgxODAsIDAlLCA0JSknXG4gICAgICAgIFxuICAgICAgICBAb25SZXNpemUoKVxuICAgICAgICBcbiAgICAgICAgYnIgPSBAcmVuZGVyZXIuZG9tRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBAdmlld09mZnNldCA9IG5ldyBWZWN0b3IyIGJyLmxlZnQsIGJyLnRvcFxuICAgICAgICBcbiAgICAgICAgQHNjZW5lID0gbmV3IFNjZW5lKClcbiAgICAgICAgQHNjZW5lLmJhY2tncm91bmQgPSBAZm9nQ29sb3JcbiAgICAgICAgQGNhbWVyYSA9IG5ldyBDYW1lcmEgdmlldzpAdmlld1xuXG4gICAgICAgIEBzdW4gPSBuZXcgUG9pbnRMaWdodCAweGZmZmZmZiwgMiwgMjAwXG4gICAgICAgIEBzdW4ucG9zaXRpb24uc2V0IDAgMTAgMFxyXG4gICAgICAgIEBzdW4uY2FzdFNoYWRvdyA9IHRydWVcbiAgICAgICAgQHN1bi5zaGFkb3cubWFwU2l6ZSA9IG5ldyBWZWN0b3IyIDIqMjA0OCwgMioyMDQ4XG4gICAgICAgIEBzY2VuZS5hZGQgQHN1blxuICAgICAgICBcbiAgICAgICAgQHNjZW5lLmFkZCBuZXcgUG9pbnRMaWdodEhlbHBlciBAc3VuLCAxXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIEBhbWJpZW50ID0gbmV3IEFtYmllbnRMaWdodCAweDE4MTgxOFxuICAgICAgICBAc2NlbmUuYWRkIEBhbWJpZW50XG4gICAgICAgIFxuICAgICAgICBtYXRlcmlhbCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCB7XG4gICAgICAgICAgICBtZXRhbG5lc3M6IDAuNlxuICAgICAgICAgICAgcm91Z2huZXNzOiAwLjNcclxuICAgICAgICAgICAgY29sb3I6MHg1NTU1ZmZcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZ2VvbWV0cnkgPSBuZXcgQm94R2VvbWV0cnkgMSAxIDFcbiAgICAgICAgYm94ID0gbmV3IE1lc2ggZ2VvbWV0cnksIG1hdGVyaWFsLmNsb25lKClcbiAgICAgICAgYm94LnBvc2l0aW9uLnNldCAwIDEgMFxuICAgICAgICBib3guY2FzdFNoYWRvdyA9IHRydWVcbiAgICAgICAgYm94LnJlY2VpdmVTaGFkb3cgPSB0cnVlXG4gICAgICAgIGJveC5uYW1lID0gJ2JveCdcbiAgICAgICAgQHNjZW5lLmFkZCBib3hcblxuICAgICAgICBtYXRlcmlhbC5jb2xvciA9IG5ldyBDb2xvciAweGZmMDAwMFxuICAgICAgICBtYXRlcmlhbC5mbGF0U2hhZGluZyA9IHRydWVcbiAgICAgICAgbWF0ZXJpYWwubWV0YWxuZXNzID0gMC45XG4gICAgICAgIGdlb21ldHJ5ID0gbmV3IFNwaGVyZUdlb21ldHJ5IDEgMTAgMTBcbiAgICAgICAgc3BoZXJlID0gbmV3IE1lc2ggZ2VvbWV0cnksIG1hdGVyaWFsXG4gICAgICAgIHNwaGVyZS5wb3NpdGlvbi5zZXQgMiAxIDFcbiAgICAgICAgc3BoZXJlLmNhc3RTaGFkb3cgPSB0cnVlXG4gICAgICAgIHNwaGVyZS5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICAgICAgICBzcGhlcmUubmFtZSA9ICdzcGhlcmUnXG4gICAgICAgIEBzY2VuZS5hZGQgc3BoZXJlXG4gICAgICBcbiAgICAgICAgbWF0ZXJpYWwgPSBuZXcgTWVzaFN0YW5kYXJkTWF0ZXJpYWwge1xuICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjBcbiAgICAgICAgICAgIGNvbG9yOiBuZXcgQ29sb3IgJ2hzbCgxODAsMCUsNCUpJ1xuICAgICAgICAgICAgcm91Z2huZXNzOiAxLjBcclxuICAgICAgICAgICAgZmxhdFNoYWRpbmc6IHRydWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZ2VvbWV0cnkgPSBuZXcgUGxhbmVHZW9tZXRyeSAxMDAwIDEwMDAgMTBcbiAgICAgICAgZ2VvbWV0cnkucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uXG4gICAgICAgIEBwbGFuZSA9IG5ldyBNZXNoIGdlb21ldHJ5LCBtYXRlcmlhbFxuICAgICAgICBAcGxhbmUuY2FzdFNoYWRvdyA9IGZhbHNlXG4gICAgICAgIEBwbGFuZS5yZWNlaXZlU2hhZG93ID0gdHJ1ZVxuICAgICAgICBAcGxhbmUubmFtZSA9ICdwbGFuZSdcbiAgICAgICAgQHBsYW5lLnJvdGF0aW9uLnNldCBkZWcycmFkKC05MCksIDAgMFxuICAgICAgICBAc2NlbmUuYWRkIEBwbGFuZVxuICAgICAgICBcbiAgICAgICAgIyBrbG9nIE9iamVjdC5rZXlzIHJlcXVpcmUgJ3RocmVlJ1xuICAgICAgICBAc2NlbmUuZm9nID0gbmV3IEZvZyBAZm9nQ29sb3IsIDEwIDEwMFxuXG4gICAgICAgIEBzZXRGb2cgICAgQG9wdGlvbnMuZm9nXG4gICAgICAgIEBzZXREaXRoZXIgQG9wdGlvbnMuZGl0aGVyIFxuICAgICAgICBcbiAgICAgICAgQHJheWNhc3RlciA9IG5ldyBSYXljYXN0ZXJcbiAgICAgICAgXG4gICAgdG9nZ2xlRGl0aGVyOiAtPiBAc2V0RGl0aGVyIG5vdCBAb3B0aW9ucy5kaXRoZXJcbiAgICB0b2dnbGVGb2c6IC0+IEBzZXRGb2cgbm90IEBvcHRpb25zLmZvZ1xuICAgICAgICBcbiAgICBzZXREaXRoZXI6IChkKSAtPiBcbiAgICAgICAgQG9wdGlvbnMuZGl0aGVyID0gZFxuICAgICAgICBAc2NlbmUudHJhdmVyc2UgKG5vZGUpIC0+XHJcbiAgICAgICAgICAgIGlmIG5vZGUgaW5zdGFuY2VvZiBNZXNoXG4gICAgICAgICAgICAgICAgbm9kZS5tYXRlcmlhbC5kaXRoZXJpbmcgPSBkXG4gICAgICAgICAgICAgICAgbm9kZS5tYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWVcbiAgICAgICAgXG4gICAgc2V0Rm9nOiAoZikgLT5cbiAgICAgICAgQG9wdGlvbnMuZm9nID0gZlxuICAgICAgICBpZiBmIFxuICAgICAgICAgICAgQHNjZW5lLmZvZy5uZWFyID0gNTBcbiAgICAgICAgICAgIEBzY2VuZS5mb2cuZmFyICA9IDEwMFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAc2NlbmUuZm9nLm5lYXIgPSA5OTk5OVxuICAgICAgICAgICAgQHNjZW5lLmZvZy5mYXIgID0gOTk5OTkrMVxuICAgICAgICBcbiAgICB0b2dnbGVHcmlkOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgQGdyaWRcbiAgICAgICAgICAgIEBzY2VuZS5yZW1vdmUgQGdyaWRcbiAgICAgICAgICAgIGRlbGV0ZSBAZ3JpZFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBAZ3JpZCA9IG5ldyBHcmlkSGVscGVyIDEwMCAxMDAgMHhmZmZmZmYsIDB4MFxuICAgICAgICAgICAgQHNjZW5lLmFkZCBAZ3JpZFxuICAgICAgICBcbiAgICByZW5kZXJTY2VuZTogPT5cbiAgICAgICAgXG4gICAgICAgIEBzdW4ucG9zaXRpb24uY29weSBAY2FtZXJhLmdldFBvc2l0aW9uKClcbiAgICAgICAgQHN1bi5wb3NpdGlvbi5hZGQgQGNhbWVyYS5nZXRVcCgpLm11bHRpcGx5U2NhbGFyIDMuMFxuICAgICAgICBAc3VuLnBvc2l0aW9uLmFkZCBAY2FtZXJhLmdldFJpZ2h0KCkubXVsdGlwbHlTY2FsYXIgLTMuMFxuICAgICAgICAjIGtsb2cgQG1vdXNlXG4gICAgICAgIEByZW5kZXJlci5yZW5kZXIgQHNjZW5lLCBAY2FtZXJhICAgICAgICBcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIEByZW5kZXJTY2VuZVxuICAgICAgIFxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAwMDAgICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAgICAgICAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDAgIFxuICAgIFxuICAgIG9uUmVzaXplOiA9PiBcbiAgICAgICAgXG4gICAgICAgIHcgPSBAdmlldy5jbGllbnRXaWR0aCBcbiAgICAgICAgaCA9IEB2aWV3LmNsaWVudEhlaWdodFxuICAgICAgICBcbiAgICAgICAgQGFzcGVjdCA9IHcvaFxuICAgICAgICBAdmlld1NpemUgPSBrcG9zIHcsaFxuICBcbiAgICAgICAgaWYgQGNhbWVyYT9cbiAgICAgICAgICAgIEBjYW1lcmEuYXNwZWN0ID0gQGFzcGVjdFxuICAgICAgICAgICAgQGNhbWVyYS5zaXplICAgPSBAdmlld1NpemVcbiAgICAgICAgICAgIEBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXG4gICAgICAgIFxuICAgICAgICAjIGxvZyAnb25lUmVzaXplJyBAdmlld1NpemVcbiAgICAgICAgQHJlbmRlcmVyPy5zZXRTaXplIHcsaFxuICAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwIDAwMCAgIFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgICAwMDAwMCAgICBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAwMDAgICAgIFxuICAgIFxuICAgIG9uS2V5RG93bjogKGV2ZW50KSA9PlxuXG4gICAgICAgIHsgbW9kLCBrZXksIGNvbWJvLCBjaGFyIH0gPSBrZXlpbmZvLmZvckV2ZW50IGV2ZW50XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2gga2V5XG4gICAgICAgICAgICB3aGVuICd3JyAgICAgdGhlbiBAY2FtZXJhLnN0YXJ0TW92ZUZvcndhcmQoKVxuICAgICAgICAgICAgd2hlbiAncycgICAgIHRoZW4gQGNhbWVyYS5zdGFydE1vdmVCYWNrd2FyZCgpXG4gICAgICAgICAgICB3aGVuICdhJyAgICAgdGhlbiBAY2FtZXJhLnN0YXJ0TW92ZUxlZnQoKVxuICAgICAgICAgICAgd2hlbiAnZCcgICAgIHRoZW4gQGNhbWVyYS5zdGFydE1vdmVSaWdodCgpXG4gICAgICAgICAgICB3aGVuICdxJyAgICAgdGhlbiBAY2FtZXJhLnN0YXJ0TW92ZURvd24oKVxuICAgICAgICAgICAgd2hlbiAnZScgICAgIHRoZW4gQGNhbWVyYS5zdGFydE1vdmVVcCgpXG4gICAgICAgICAgICB3aGVuICdsZWZ0JyAgdGhlbiBAY2FtZXJhLnN0YXJ0UGl2b3RMZWZ0KClcbiAgICAgICAgICAgIHdoZW4gJ3JpZ2h0JyB0aGVuIEBjYW1lcmEuc3RhcnRQaXZvdFJpZ2h0KClcbiAgICAgICAgICAgIHdoZW4gJ3VwJyAgICB0aGVuIEBjYW1lcmEuc3RhcnRQaXZvdFVwKClcbiAgICAgICAgICAgIHdoZW4gJ2Rvd24nICB0aGVuIEBjYW1lcmEuc3RhcnRQaXZvdERvd24oKVxuICAgICAgICAgICAgd2hlbiAnZycgICAgIHRoZW4gQHRvZ2dsZUdyaWQoKVxuICAgICAgICAgICAgd2hlbiAnZicgICAgIHRoZW4gQHRvZ2dsZUZvZygpXG4gICAgICAgICAgICB3aGVuICd0JyAgICAgdGhlbiBAdG9nZ2xlRGl0aGVyKClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBrbG9nICdrZXlEb3duJyBtb2QsIGtleSwgY29tYm8sIGNoYXIsIGV2ZW50LndoaWNoXG4gICAgICAgIFxuICAgICAgICBzdXBlclxuICAgICAgICBcbiAgICBvbktleVVwOiAoZXZlbnQpID0+XG4gICAgICAgIFxuICAgICAgICB7IG1vZCwga2V5LCBjb21ibywgY2hhciB9ID0ga2V5aW5mby5mb3JFdmVudCBldmVudFxuICAgICAgICAjIGtsb2cgJ2tleVVwJyBtb2QsIGtleSwgY29tYm8sIGNoYXIsIGV2ZW50LndoaWNoXG4gICAgICAgIFxuICAgICAgICBzdXBlclxuICAgICAgICBcbiAgICAjIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAgMDAwICAwMDAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgIFxuXG4gICAgbW91c2VFdmVudDogKGV2ZW50KSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgQHZpZXdPZmZzZXRcbiAgICAgICAgICAgIEBtb3VzZS54ID0gICAoIChldmVudC5jbGllbnRYIC0gQHZpZXdPZmZzZXQueCkgLyBAdmlldy5jbGllbnRXaWR0aCApICogMiAtIDE7XHJcbiAgICAgICAgICAgIEBtb3VzZS55ID0gLSAoIChldmVudC5jbGllbnRZIC0gQHZpZXdPZmZzZXQueSkgLyBAdmlldy5jbGllbnRIZWlnaHQgKSAqIDIgKyAxO1xuICAgIFxuICAgIG9uTW91c2VNb3ZlOiAoZXZlbnQpID0+IEBtb3VzZUV2ZW50IGV2ZW50XG4gICAgb25Nb3VzZVVwOiAgIChldmVudCkgPT4gQG1vdXNlRXZlbnQgZXZlbnRcbiAgICBvbk1vdXNlRG93bjogKGV2ZW50KSA9PiBAbW91c2VFdmVudCBldmVudDsgQHBpY2tPYmplY3QoKVxuICAgICAgICBcbiAgICBwaWNrT2JqZWN0OiAtPlxuICAgICAgICBcbiAgICAgICAgQHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhIEBtb3VzZSwgQGNhbWVyYVxuICAgICAgICBmb3IgaW50ZXJzZWN0IGluIEByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyBAc2NlbmUuY2hpbGRyZW5cbiAgICAgICAgICAgIGlmIGludGVyc2VjdD8ub2JqZWN0Py50eXBlID09ICdNZXNoJ1xuICAgICAgICAgICAgICAgIGlmIGludGVyc2VjdC5vYmplY3QubmFtZSAhPSAncGxhbmUnXG4gICAgICAgICAgICAgICAgICAgIEBjYW1lcmEuZmFkZVRvUG9zIGludGVyc2VjdC5vYmplY3QucG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgXG4gICAgIyAwMCAgICAgMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgXG4gICAgXG4gICAgb25NZW51QWN0aW9uOiAoYWN0aW9uLCBhcmdzKSA9PlxuICAgICAgICBcbiAgICAgICAgIyBrbG9nIFwibWVudUFjdGlvbiAje2FjdGlvbn1cIiBhcmdzXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBzdXBlclxuICAgICAgICAgICAgICAgICAgICAgICAgXG5uZXcgTWFpbldpbiAgICAgICAgICAgIFxuIl19
//# sourceURL=../coffee/window.coffee